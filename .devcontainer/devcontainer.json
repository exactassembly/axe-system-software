{
    "name": "Yocto|Cooker",
    "dockerComposeFile": "docker-compose.yml",
    "service": "app",
    "features": {
        "ghcr.io/exactassembly/yocto-devcontainer-features/yocto-cooker:1" : {
                "version": "1.3.1"
            }
    },
    "remoteUser": "vscode",
    "workspaceFolder": "/workspaces/yocto-vscode",
    "containerEnv": {
        "COOKER_MENU_DIR" : "/workspaces/yocto-vscode",
        "COOKER_USE_DL_CACHE" : "true",
        "COOKER_USE_SSTATE_CACHE" : "true"
    },

    "initializeCommand": "echo FOO=yocto-vscode > .devcontainer/.env",

    "postCreateCommand": {
        "dl-cache": "sudo chmod -R 777 /var/lib/dl-cache",
        "sstate-cache": "sudo chmod -R 777 /var/lib/sstate-cache",
        "git": "sudo runuser -l vscode -c 'git config --global --add safe.directory /workspaces' ",
        "symlink": "if [ -d /workspaces/${localWorkspaceFolderBasename} ]; then ; sudo ln -fs /workspaces/${localWorkspaceFolderBasename} /workspaces/yocto-vscode ; endif"

    },
    
    "customizations": {
        "vscode": {
            "extensions": [
                "mads-hartmann.bash-ide-vscode",
                "EditorConfig.EditorConfig",
                "EugenWeins.bitbake",
				"yzhang.markdown-all-in-one",
				"streetsidesoftware.code-spell-checker",
				"DavidAnson.vscode-markdownlint",
				"shd101wyy.markdown-preview-enhanced",
				"bierner.github-markdown-preview"
            ]
        }
    }
}